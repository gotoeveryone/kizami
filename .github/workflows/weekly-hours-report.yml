name: Weekly Hours Report

on:
  schedule:
    - cron: '5 22 * * 0'
  workflow_dispatch:

concurrency:
  group: weekly-hours-report
  cancel-in-progress: false

jobs:
  notify:
    runs-on: ubuntu-latest
    env:
      TZ: Asia/Tokyo
      REPORT_API_BASE_URL: ${{ secrets.REPORT_API_BASE_URL }}
      REPORT_API_TOKEN: ${{ secrets.REPORT_API_TOKEN }}
      WEEKLY_REPORT_SLACK_WEBHOOK_URL: ${{ secrets.WEEKLY_REPORT_SLACK_WEBHOOK_URL }}
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Send weekly summary to Slack
        run: bash scripts/notify_weekly_hours.sh
